## 7.1 React 与服务端模版

Node.js 引领了前后端分层的浪潮，React 以及 React 同构的出现让分层思想可以更加彻底化。

### 7.1.1 什么是服务端渲染

服务端渲染，意味着前端代码可以在服务端作渲染，进而达到在同步请求 HTML 时，直接返回渲染好的页面。

##### 优点：

- **利于 SEO。** 服务端渲染可以让搜索引擎更容易读取页面的 meta 信息以及其他 SEO 的相关信息，大大增加了网站在搜索引擎中的可见度。

- **加速首屏渲染。** 客户端渲染的一个缺点是，当用户第一次进入站点时，因为此时浏览器中没有缓存，需要下载代码后在本地渲染，事件较长。而服务端渲染则是，用户在下载时已经是渲染好的页面了，其打开速度比本地渲染快。

- **服务端和客户端可以共享某些代码，避免重复定义。**使结构清晰，增加可维护性。

##### 原因

React 之所以能做到服务端渲染，主要是因为 ReactDOM。

- ReatDOM.render: 将 React 渲染到 DOM 中的方法。

- react-dom/server，可以让 React 组件以字符串的形式渲染。(比如renderToString 和 renderToStaticMarkup)

它们与 render 的区别是 render 方法需要指定具体渲染到 DOM 上的节点，但这两个方法都只返回了一段 HTML 字符串。

- **React.renderToString：**它把 React 元素转成一个 HTML 字符串并在服务端标识 reactid。 所以在浏览器端再次渲染时，React 只是做事件绑定等前端相关的操作，而不会重新渲染 整个 DOM 树，这样能带来高性能的页面首次加载。“同构”黑魔法主要就是从这个 API 而 来的。

- **React.renderToStaticMarkup：**它相当于简化版的 renderToString。如果应用基本上是静 态文本，建议用这个方法。少了大批的 reactid，DOM 自然精简了不少，在 IO 流传输上 也节省了流量。

